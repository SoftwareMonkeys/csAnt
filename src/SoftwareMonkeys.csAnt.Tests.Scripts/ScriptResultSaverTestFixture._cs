using System;
using NUnit.Framework;
using System.IO;

namespace SoftwareMonkeys.csAnt.Tests.Scripts
{
    [TestFixture]
    public class ScriptResultSaverTestFixture : BaseScriptingTestFixture
    {
        // TODO: Remove this test fixture if not needed. Path checking should be done by testing the file namer directly.
        [Test]
        public void Test_GetXmlFilePath_3()
        {
            throw new NotImplementedException();

           /* var script1 = GetTestScript("Test1");
            var script2 = GetTestScript("Test2");
            var script3 = GetTestScript("Test3");

            script2.ParentScript = script1;
            script3.ParentScript = script2;

            var resultsDir = script1.CurrentDirectory
                + Path.DirectorySeparatorChar
                + "tests"
                + Path.DirectorySeparatorChar
                + "results";

            var fileNamer = new ScriptXmlReportFileNamer();

            var filePath = fileNamer.GetXmlFileName(script1);

            var expectedFilePath = resultsDir
                + Path.DirectorySeparatorChar
                + script1.TimeStamp
                + Path.DirectorySeparatorChar
                + "xml"
                + Path.DirectorySeparatorChar
                + script1.ScriptName
                + Path.DirectorySeparatorChar
                + script2.ScriptName
                + Path.DirectorySeparatorChar
                + script3.ScriptName
                + ".xml";
            
            Console.WriteLine ("Expected file path:");
            Console.WriteLine (expectedFilePath);
            Console.WriteLine ("Actual file path:");
            Console.WriteLine (filePath);

            Assert.AreEqual(expectedFilePath, filePath, "Wrong file path.");*/
        }
        
        [Test]
        public void Test_GetXmlFilePath_1()
        {
            var script1 = GetTestScript("Test1");

            var saver = new ScriptResultSaver(
                script1,
                new ScriptXmlResultFileNamer()
            );

            var filePath = saver.GetXmlFileName(script1);
            
            var resultsDir = script1.CurrentDirectory
                + Path.DirectorySeparatorChar
                + "tests"
                + Path.DirectorySeparatorChar
                + "results";

            var expectedFilePath = resultsDir
                + Path.DirectorySeparatorChar
                + "scripts"
                + Path.DirectorySeparatorChar
                + script1.TimeStamp
                + Path.DirectorySeparatorChar
                + "xml"
                + Path.DirectorySeparatorChar
                + script1.ScriptName
                + ".xml";
            
            Console.WriteLine ("Expected file path:");
            Console.WriteLine (expectedFilePath);
            Console.WriteLine ("Actual file path:");
            Console.WriteLine (filePath);

            Assert.AreEqual(expectedFilePath, filePath, "Wrong file path.");
        }
    }
}

