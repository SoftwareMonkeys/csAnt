using System;
using NUnit.Framework;
using System.IO;

namespace SoftwareMonkeys.csAnt.Tests
{
    [TestFixture]
    public class GetTmpRootTestFixture : BaseTestFixture
    {
        [Test]
        public void Test_GetTmpRoot_Standard()
        {
            var script = GetDummyScript();

            script.CurrentDirectory = script.OriginalDirectory;

            var root = script.GetTmpRoot();

            var expected = script.OriginalDirectory
                + ".tmp";

            Assert.AreEqual(expected, root, "Paths don't match.");
        }
        
        [Test]
        public void Test_GetTmpRoot_WithinTmp()
        {
            var script = GetDummyScript();

            var root = script.GetTmpRoot();

            var name = Path.GetFileNameWithoutExtension(script.OriginalDirectory);

            var expected = script.OriginalDirectory
                + ".tmp"
                + Path.DirectorySeparatorChar
                + script.TimeStamp
                + Path.DirectorySeparatorChar
                + name
                + ".tmp";

            Assert.AreEqual(expected, root, "Paths don't match.");
        }
    }
}

